# Render Blueprint - Infrastructure as Code
# https://render.com/docs/blueprint-spec

services:
  # Cron job that polls Monday for items ready to create Jira tickets
  - type: cron
    name: monday-jira-poller
    runtime: node
    region: oregon
    plan: starter
    schedule: "*/10 * * * *"  # Every 10 minutes
    buildCommand: cd server && npm install
    startCommand: cd server && node cron.js
    envVars:
      - key: MONDAY_API_TOKEN
        sync: false  # Set manually in Render dashboard
      - key: MONDAY_BOARD_ID
        value: "18393273008"
      - key: JIRA_BASE_URL
        value: "https://wix.atlassian.net"
      - key: JIRA_EMAIL
        sync: false  # Set manually in Render dashboard
      - key: JIRA_API_TOKEN
        sync: false  # Set manually in Render dashboard
